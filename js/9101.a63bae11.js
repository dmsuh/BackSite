"use strict";(self["webpackChunkmy_vuetify_app"]=self["webpackChunkmy_vuetify_app"]||[]).push([[9101],{8099:function(){},3949:function(e,t,l){var a=l(4677),n=l(9346);const o=e=>{const t=(0,a.createConfirmDialog)(n.Z,{title:e.title||null,message:e.message||null,confirmText:e.confirmText||null,cancelText:e.cancelText||null});return t.onConfirm(e.onConfirm),e.onCancel&&t.onCancel(e.onCancel),t};t["Z"]=o},5040:function(e,t,l){l.d(t,{Z:function(){return p}});var a=l(3396),n=l(2268),o=l(3289);const r={class:"card-header"},s={class:"card-header-title"},u={class:"toolbar"};function i(e,t,l,i,d,c){const m=(0,a.up)("el-card");return(0,a.wg)(),(0,a.j4)(m,{class:"box-card"},{header:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a._)("div",s,[(0,a.Wm)(o.t,{size:"small"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.icon),1)])),_:1}),(0,a._)("span",null,(0,n.zw)(e.title),1)]),(0,a._)("div",u,[(0,a.WI)(e.$slots,"actions")])])])),default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3})}var d=(0,a.aZ)({name:"PageCard",props:{title:{type:String,default:null},icon:{type:String,default:null},color:{type:String,default:""}}}),c=l(89);const m=(0,c.Z)(d,[["render",i]]);var p=m},725:function(e,t,l){l.d(t,{Z:function(){return f}});var a=l(3396),n=l(2268),o=l(3289);const r={class:"card-header"},s={class:"card-header-title"},u={class:"toolbar"};function i(e,t,l,i,d,c){const m=(0,a.up)("el-button"),p=(0,a.up)("el-option"),f=(0,a.up)("el-select"),g=(0,a.up)("el-date-picker"),y=(0,a.up)("el-input-number"),v=(0,a.up)("el-input"),h=(0,a.up)("el-form-item"),w=(0,a.up)("el-form"),b=(0,a.up)("el-card");return(0,a.wg)(),(0,a.j4)(b,{class:"box-card"},{header:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a._)("div",s,[(0,a.Wm)(o.t,{size:"small",icon:"mdi-filter"}),(0,a._)("span",null,(0,n.zw)(e.title),1)]),(0,a._)("div",u,[(0,a.Wm)(m,{type:"primary",onClick:t[0]||(t[0]=t=>e.$emit("update:modelValue",e.localModelValue))},{default:(0,a.w5)((()=>[(0,a.Wm)(o.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-magnify")])),_:1}),(0,a.Uk)(" "+(0,n.zw)(e.$t("main.buttons.apply")),1)])),_:1})])])])),default:(0,a.w5)((()=>[(0,a.Wm)(w,{ref:"form",model:e.localModelValue,"label-position":"top"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filters,(t=>((0,a.wg)(),(0,a.j4)(h,{key:t.key,prop:t.key,label:t.name},{default:(0,a.w5)((()=>["select"===t.type?((0,a.wg)(),(0,a.j4)(f,{key:0,modelValue:e.localModelValue[t.key],"onUpdate:modelValue":l=>e.localModelValue[t.key]=l,placeholder:t.name,clearable:"",onClear:l=>e.localModelValue[t.key]=null},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.items,((e,t)=>((0,a.wg)(),(0,a.j4)(p,{key:t,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onClear"])):"date"===t.type?((0,a.wg)(),(0,a.j4)(g,{key:1,modelValue:e.localModelValue[t.key],"onUpdate:modelValue":l=>e.localModelValue[t.key]=l,placeholder:t.name,type:"datetime",format:e.$t("formats.datetime"),"value-format":"YYYY-MM-DD h:m:s a"},null,8,["modelValue","onUpdate:modelValue","placeholder","format"])):"number"===t.type?((0,a.wg)(),(0,a.j4)(y,{key:2,modelValue:e.localModelValue[t.key],"onUpdate:modelValue":l=>e.localModelValue[t.key]=l,placeholder:t.name},null,8,["modelValue","onUpdate:modelValue","placeholder"])):((0,a.wg)(),(0,a.j4)(v,{key:3,modelValue:e.localModelValue[t.key],"onUpdate:modelValue":l=>e.localModelValue[t.key]=l,placeholder:t.name},null,8,["modelValue","onUpdate:modelValue","placeholder"]))])),_:2},1032,["prop","label"])))),128))])),_:1},8,["model"])])),_:1})}var d=l(4870),c=(0,a.aZ)({props:{title:String,filters:{type:Array},modelValue:Object},setup(){return{itemsValue:(0,d.iH)({})}},watch:{modelValue:{handler:function(e){this.localModelValue=e},deep:!0}},data(){return{localModelValue:{}}},mounted(){this.localModelValue=this.modelValue||{}}}),m=l(89);const p=(0,m.Z)(c,[["render",i]]);var f=p},9101:function(e,t,l){l.r(t),l.d(t,{default:function(){return h}});var a=l(3396),n=l(3369),o=l(6824),r=l(8521),s=l(3289);const u=(0,a._)("img",{src:"https://i.pinimg.com/originals/94/fd/2b/94fd2bf50097ade743220761f41693d5.gif",style:{width:"100px",height:"80px"}},null,-1);function i(e,t,l,i,d,c){const m=(0,a.up)("el-button"),p=(0,a.up)("v-data-table"),f=(0,a.up)("page-card"),g=(0,a.up)("v-filter");return(0,a.wg)(),(0,a.j4)(n.K,null,{default:(0,a.w5)((()=>[(0,a.Wm)(o.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r.D,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,{icon:"mdi-format-list-bulleted",title:e.$t("customer.table"),color:"grey"},{actions:(0,a.w5)((()=>[(0,a.Wm)(m,{circle:"",type:"success",onClick:t[0]||(t[0]=t=>e.handleCreate())},{default:(0,a.w5)((()=>[(0,a.Wm)(s.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-plus")])),_:1})])),_:1}),e.itemsSelected.length?((0,a.wg)(),(0,a.j4)(m,{key:0,type:"danger",circle:"",onClick:t[1]||(t[1]=t=>e.handleDelete())},{default:(0,a.w5)((()=>[(0,a.Wm)(s.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete")])),_:1})])),_:1})):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(p,{"server-options":e.serverOptions,"onUpdate:serverOptions":t[2]||(t[2]=t=>e.serverOptions=t),"items-selected":e.itemsSelected,"onUpdate:itemsSelected":t[3]||(t[3]=t=>e.itemsSelected=t),"server-items-length":e.dataTable.total,loading:e.isLoading,headers:e.headers,items:e.dataTable.data},{"item-action":(0,a.w5)((t=>[(0,a.Wm)(m,{type:"primary",circle:"",onClick:l=>e.handleUpdate(t)},{default:(0,a.w5)((()=>[(0,a.Wm)(s.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:2},1032,["onClick"])])),loading:(0,a.w5)((()=>[u])),_:1},8,["server-options","items-selected","server-items-length","loading","headers","items"])])),_:1},8,["title"])])),_:1}),(0,a.Wm)(r.D,{cols:"3"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{title:"Поиск",filters:e.filters,modelValue:e.filterModel,"onUpdate:modelValue":t[4]||(t[4]=t=>e.filterModel=t)},null,8,["filters","modelValue"])])),_:1})])),_:1})])),_:1})}var d=l(7139),c=l(5040),m=l(7315),p=l(3949),f=l(725),g=(0,a.aZ)({setup(){const e=(0,d.oR)(),[t,l,a]=(0,m.Z)((t=>e.dispatch("customer/loadTable",t))),[n,o,r]=(0,m.Z)((t=>e.dispatch("customer/deleteRows",t)));return{loadTable:t,status:l,error:a,deleteRows:n,deleteStatus:o,deleteError:r}},components:{VFilter:f.Z,PageCard:c.Z},computed:{isLoading(){return this.status===m.i.pending},dataTable(){return this.$store.getters["customer/getDataTable"]},customerGroups(){return this.$store.getters["customerGroup/getItems"]||[]},filters(){const e=this.customerGroups.map((e=>({id:e.id,name:e.name})));return[{name:"Имя клиента",key:"firstName"},{name:"Email",key:"email"},{name:"Группа клиента",key:"customerGroupId",type:"select",items:e},{name:"Статус",key:"isActive",type:"select",items:[{name:"true",id:!0},{name:"false",id:!1}]},{name:"Ip",key:"ip"},{name:"Дата добавления",key:"createdAt",type:"date"}]}},watch:{serverOptions:{handler:function(e){this.loadServerSide(e)},deep:!0}},data(){return{headers:[{text:"id",value:"id",sortable:!0},{text:"Имя клиента",value:"firstName",sortable:!0},{text:"E-mail",value:"email",sortable:!0},{text:"Группа клиента",value:"customerGroupId",sortable:!0},{text:"Статус",value:"isActive",sortable:!0},{text:"IP",value:"ip",sortable:!0},{text:"Дата регистрации",value:"createdAt",sortable:!0},{text:"Действие",value:"action"}],itemsSelected:[],serverOptions:{page:1,rowsPerPage:5,sortBy:"id",sortType:"desc"},filterModel:{firstName:null,email:null,customerGroupId:null,isActive:null,ip:null,createdAt:null}}},mounted(){this.loadServerSide(this.serverOptions)},methods:{handleCreate(){this.$router.push({name:"customer-create"})},handleUpdate(e){this.$router.push({name:"customer-update",params:{id:e.id}})},async handleDelete(){const e=(0,p.Z)({title:"Удаление клиентов",message:"Вы действительно хотите удалить выбранных клиентов?",onConfirm:async()=>{await this.deleteRows(this.itemsSelected.map((e=>e.id))),this.itemsSelected=[],await this.loadServerSide(this.serverOptions)}});await e.reveal()},loadServerSide(e){const t={limit:e.rowsPerPage,offset:(e.page-1)*e.rowsPerPage};e.sortBy&&e.sortType&&(t.order=`${e.sortBy}:${e.sortType}`),this.loadTable(t)}}}),y=l(89);const v=(0,y.Z)(g,[["render",i]]);var h=v},8521:function(e,t,l){l.d(t,{D:function(){return f}});l(8099);var a=l(1138),n=l(2268),o=l(3396),r=l(320);const s=["sm","md","lg","xl","xxl"],u=(()=>s.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),i=(()=>s.reduce(((e,t)=>(e["offset"+(0,n.kC)(t)]={type:[String,Number],default:null},e)),{}))(),d=(()=>s.reduce(((e,t)=>(e["order"+(0,n.kC)(t)]={type:[String,Number],default:null},e)),{}))(),c={col:Object.keys(u),offset:Object.keys(i),order:Object.keys(d)};function m(e,t,l){let a=e;if(null!=l&&!1!==l){if(t){const l=t.replace(e,"");a+=`-${l}`}return"col"===e&&(a="v-"+a),"col"!==e||""!==l&&!0!==l?(a+=`-${l}`,a.toLowerCase()):a.toLowerCase()}}const p=["auto","start","end","center","baseline","stretch"],f=(0,r.a)({name:"VCol",props:{cols:{type:[Boolean,String,Number],default:!1},...u,offset:{type:[String,Number],default:null},...i,order:{type:[String,Number],default:null},...d,alignSelf:{type:String,default:null,validator:e=>p.includes(e)},...(0,a.Q)()},setup(e,t){let{slots:l}=t;const a=(0,o.Fl)((()=>{const t=[];let l;for(l in c)c[l].forEach((a=>{const n=e[a],o=m(l,a,n);o&&t.push(o)}));const a=t.some((e=>e.startsWith("v-col-")));return t.push({"v-col":!a||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),t}));return()=>{var t;return(0,o.h)(e.tag,{class:a.value},null==(t=l.default)?void 0:t.call(l))}}})},3369:function(e,t,l){l.d(t,{K:function(){return s}});var a=l(3396),n=(l(8099),l(1138)),o=l(320),r=l(9888);const s=(0,o.a)({name:"VContainer",props:{fluid:{type:Boolean,default:!1},...(0,n.Q)()},setup(e,t){let{slots:l}=t;return(0,r.L)((()=>(0,a.Wm)(e.tag,{class:["v-container",{"v-container--fluid":e.fluid}]},l))),{}}})},6824:function(e,t,l){l.d(t,{o:function(){return S}});l(8099);var a=l(1138),n=l(2268),o=l(3396),r=l(320);const s=["sm","md","lg","xl","xxl"],u=["start","end","center"],i=["space-between","space-around","space-evenly"];function d(e,t){return s.reduce(((l,a)=>(l[e+(0,n.kC)(a)]=t(),l)),{})}const c=[...u,"baseline","stretch"],m=e=>c.includes(e),p=d("align",(()=>({type:String,default:null,validator:m}))),f=[...u,...i],g=e=>f.includes(e),y=d("justify",(()=>({type:String,default:null,validator:g}))),v=[...u,...i,"stretch"],h=e=>v.includes(e),w=d("alignContent",(()=>({type:String,default:null,validator:h}))),b={align:Object.keys(p),justify:Object.keys(y),alignContent:Object.keys(w)},k={align:"align",justify:"justify",alignContent:"align-content"};function V(e,t,l){let a=k[e];if(null!=l){if(t){const l=t.replace(e,"");a+=`-${l}`}return a+=`-${l}`,a.toLowerCase()}}const S=(0,r.a)({name:"VRow",props:{dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:m},...p,justify:{type:String,default:null,validator:g},...y,alignContent:{type:String,default:null,validator:h},...w,...(0,a.Q)()},setup(e,t){let{slots:l}=t;const a=(0,o.Fl)((()=>{const t=[];let l;for(l in b)b[l].forEach((a=>{const n=e[a],o=V(l,a,n);o&&t.push(o)}));return t.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),t}));return()=>{var t;return(0,o.h)(e.tag,{class:["v-row",a.value]},null==(t=l.default)?void 0:t.call(l))}}})}}]);
//# sourceMappingURL=9101.a63bae11.js.map