"use strict";(self["webpackChunkmy_vuetify_app"]=self["webpackChunkmy_vuetify_app"]||[]).push([[7823],{5040:function(e,l,a){a.d(l,{Z:function(){return c}});var t=a(3396),o=a(2268),d=a(3289);const n={class:"card-header"},u={class:"card-header-title"},i={class:"toolbar"};function r(e,l,a,r,m,s){const p=(0,t.up)("el-card");return(0,t.wg)(),(0,t.j4)(p,{class:"box-card"},{header:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t._)("div",u,[(0,t.Wm)(d.t,{size:"small"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.icon),1)])),_:1}),(0,t._)("span",null,(0,o.zw)(e.title),1)]),(0,t._)("div",i,[(0,t.WI)(e.$slots,"actions")])])])),default:(0,t.w5)((()=>[(0,t.WI)(e.$slots,"default")])),_:3})}var m=(0,t.aZ)({name:"PageCard",props:{title:{type:String,default:null},icon:{type:String,default:null},color:{type:String,default:""}}}),s=a(89);const p=(0,s.Z)(m,[["render",r]]);var c=p},7823:function(e,l,a){a.r(l),a.d(l,{default:function(){return f}});var t=a(3396),o=a(3289);function d(e,l,a,d,n,u){const i=(0,t.up)("el-button"),r=(0,t.up)("option-form"),m=(0,t.up)("page-card");return(0,t.wg)(),(0,t.j4)(m,{icon:"mdi-pencil-outline",title:e.$t("option.update"),color:"grey"},{actions:(0,t.w5)((()=>[(0,t.Wm)(i,{onClick:l[0]||(l[0]=l=>e.handleSubmit()),type:"success",circle:""},{default:(0,t.w5)((()=>[(0,t.Wm)(o.t,null,{default:(0,t.w5)((()=>[(0,t.Uk)("mdi-content-save-outline")])),_:1})])),_:1}),(0,t.Wm)(i,{onClick:l[1]||(l[1]=l=>e.handleBack()),type:"default",circle:""},{default:(0,t.w5)((()=>[(0,t.Wm)(o.t,null,{default:(0,t.w5)((()=>[(0,t.Uk)("mdi-backup-restore")])),_:1})])),_:1})])),default:(0,t.w5)((()=>[(0,t.Wm)(r,{ref:"form",modelValue:e.model,"onUpdate:modelValue":l[2]||(l[2]=l=>e.model=l),"is-loading":e.isLoading},null,8,["modelValue","is-loading"])])),_:1},8,["title"])}var n=a(4870),u=a(7139),i=a(7315),r=a(5040),m=a(8907),s=(0,t.aZ)({setup(){const e=(0,u.oR)(),[l,a,t]=(0,i.Z)((l=>e.dispatch("option/loadForm",l))),[o,d,r]=(0,i.Z)(((l,a)=>e.dispatch("option/updateForm",{id:l,dataForm:a}))),m=(0,n.iH)();return{loadForm:l,loadStatus:a,loadError:t,saveForm:o,saveStatus:d,saveError:r,form:m}},components:{PageCard:r.Z,OptionForm:m.Z},computed:{isLoading(){return this.saveStatus===i.i.pending||this.loadStatus===i.i.pending}},data(){return{model:null}},async mounted(){this.model=await this.loadForm(this.$route.params.id)},methods:{handleBack(){this.$router.push({name:"option"})},async handleSubmit(){const e=await this.saveForm(this.$route.params.id,this.model);"undefined"!==typeof e&&(this.model=e)}}}),p=a(89);const c=(0,p.Z)(s,[["render",d]]);var f=c},8907:function(e,l,a){a.d(l,{Z:function(){return m}});var t=a(3396),o=a(3289);function d(e,l,a,d,n,u){const i=(0,t.up)("el-input"),r=(0,t.up)("el-form-item"),m=(0,t.up)("el-option"),s=(0,t.up)("el-select"),p=(0,t.up)("el-table-column"),c=(0,t.up)("el-image-input"),f=(0,t.up)("el-input-number"),h=(0,t.up)("el-button"),w=(0,t.up)("el-table"),b=(0,t.up)("el-form"),v=(0,t.Q2)("loading");return(0,t.wy)(((0,t.wg)(),(0,t.j4)(b,{ref:"form",model:e.model,"label-width":"240px"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{label:e.$t("main.labels.name"),prop:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:e.model.name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.model.name=l),placeholder:e.$t("main.labels.name")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,t.Wm)(r,{label:e.$t("main.labels.sortOrder"),prop:"sortOrder"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:e.model.sortOrder,"onUpdate:modelValue":l[1]||(l[1]=l=>e.model.sortOrder=l),placeholder:e.$t("main.labels.sortOrder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,t.Wm)(r,{label:e.$t("option.labels.optionTypeId"),prop:"optionTypeId"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:e.model.optionTypeId,"onUpdate:modelValue":l[2]||(l[2]=l=>e.model.optionTypeId=l),placeholder:e.$t("option.labels.optionTypeId")},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.optionTypes,(e=>((0,t.wg)(),(0,t.j4)(m,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),e.allowValueTypes.includes(e.model.optionTypeId)?((0,t.wg)(),(0,t.j4)(r,{key:0,label:e.$t("main.labels.value"),prop:"value"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{data:e.model.values,style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{label:e.$t("main.labels.name"),prop:"name"},{default:(0,t.w5)((l=>[(0,t.Wm)(r,{prop:"name","label-width":"0"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:e.model.values[l.$index].name,"onUpdate:modelValue":a=>e.model.values[l.$index].name=a,placeholder:e.$t("main.labels.name")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024)])),_:1},8,["label"]),(0,t.Wm)(p,{label:e.$t("main.labels.image"),prop:"image"},{default:(0,t.w5)((l=>[(0,t.Wm)(r,{prop:"image","label-width":"0"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.model.values[l.$index].image,"onUpdate:modelValue":a=>e.model.values[l.$index].image=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:1},8,["label"]),(0,t.Wm)(p,{label:e.$t("main.labels.sortOrder"),prop:"sortOrder"},{default:(0,t.w5)((l=>[(0,t.Wm)(r,{prop:"sortOrder","label-width":"0"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:e.model.values[l.$index].sortOrder,"onUpdate:modelValue":a=>e.model.values[l.$index].sortOrder=a,placeholder:e.$t("main.labels.sortOrder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024)])),_:1},8,["label"]),(0,t.Wm)(p,{align:"right",width:"100px"},{header:(0,t.w5)((()=>[(0,t.Wm)(h,{type:"success",onClick:l[3]||(l[3]=l=>e.addOptionValue())},{default:(0,t.w5)((()=>[(0,t.Wm)(o.t,null,{default:(0,t.w5)((()=>[(0,t.Uk)("mdi-plus")])),_:1})])),_:1})])),default:(0,t.w5)((l=>[(0,t.Wm)(h,{type:"danger",onClick:a=>e.removeOptionValue(l.$index)},{default:(0,t.w5)((()=>[(0,t.Wm)(o.t,null,{default:(0,t.w5)((()=>[(0,t.Uk)("mdi-delete")])),_:1})])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1},8,["label"])):(0,t.kq)("",!0)])),_:1},8,["model"])),[[v,e.isLoading]])}var n=a(4870),u=(0,t.aZ)({name:"OptionForm",setup(){return{form:(0,n.iH)(),values:(0,n.iH)(),rules:(0,n.qj)({})}},props:{modelValue:Object,isLoading:Boolean,isNew:{type:Boolean,default:!1}},computed:{optionTypes(){return this.$store.getters["option/getTypes"]},allowValueTypes(){const e=this.optionTypes.filter((e=>e.hasValues));return e.map((e=>e.id))}},watch:{modelValue:{handler:function(e){this.model=e},deep:!0},model:{handler:function(e){this.$emit("update:modelValue",e)},deep:!0}},data(){return{model:this.modelValue||{sortOrder:0,name:"123",optionTypeId:"input",values:[]},isValid:!1}},methods:{async validate(){let e=!0;if(this.values&&Array.isArray(this.values))for(const l of this.values)await l.validate()||(e=!1);return this.form&&await this.form.validate(),this.isValid&&e},addOptionValue(){this.model.values.push({sortOrder:0,name:"New option value",image:""})},removeOptionValue(e){this.model.values.splice(e,1)}}}),i=a(89);const r=(0,i.Z)(u,[["render",d]]);var m=r}}]);
//# sourceMappingURL=7823.392871c8.js.map